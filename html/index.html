<!DOCTYPE html>
  <html lang="en">
    <head>

      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>I Couldn't Help But Wonder</title>
      <link rel="stylesheet" href="css/main.css">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">

    </head>

  <body>

    <div class="wrapper">
      <div class="search_box">
          <input id="inputBox" type="text" placeholder="Rediscover your Resturant" list="rests"/>

            <datalist id="rests">

            </datalist>

          <button class="fas fa-search" type="button" onclick="goNext()"> </button>
      </div>
    </div>
    <script>
        function httpGet(theUrl)
        {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
            xmlHttp.send();
            return xmlHttp.responseText;

        }
        function goNext(rest_id)
        {
          console.log(rest_id)
          if (rest_id == ''){
            alert('Please select a restaurant')
          }
          else{
            //window.location.href='client_dashboard.html?id=' + rest_id ;
            console.log(rest_id)
          }
        }
        var request = httpGet('http://127.0.0.1:5000/listRes')
        let listRest = JSON.parse(request)

        console.log(listRest)
        let datalist = document.getElementById('rests')
        for( i = 0 ; i < listRest.length; i++  ){
          var opt = document.createElement("OPTION");
          var t = document.createTextNode(listRest[i]['restaurant_name'])
          opt.appendChild(t)
          opt.setAttribute('data-id',listRest[i]['restaurant_id'])
          datalist.appendChild(opt)
          input = document.getElementById('inputBox')

        }



    </script>
    <!--
    <audio controls>
      <source src="mus.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
    </audio>
    !-->
  </body>

</html>
